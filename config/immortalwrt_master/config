#
# 自动生成的配置文件，请勿手动编辑。
# ImmortalWrt Configuration for Fine3399 (RK3399)
#
# ======================================================================================
# 中文注释和推荐说明
#
# 设备信息:
#   - CPU: Rockchip RK3399
#   - 内存: 4GB RAM
#   - 闪存: 64GB
#   - 网络: 双千兆网卡
#
# 基于以上信息，此配置文件做了以下关键定制：
# 1. 目标平台: 明确指向 Rockchip RK3399 (aarch64_generic)。
# 2. 设备型号: 选用 `generic` (通用) 设备。本项目的构建脚本会自动匹配 `model_database.conf`
#    中的定义，为 Fine3399 设备打包正确的 `rk3399-fine3399.dtb` 设备树文件。
# 3. 分区大小: 为内核分配128MB，为根目录分配4096MB(4GB)，充分利用64GB闪存空间，
#    为安装Docker等大型应用预留充足空间。
# 4. 固件格式: 选用EXT4文件系统，稳定可靠。
# 5. 核心驱动:
#    - kmod-dwmac-rockchip: RK3399原生双千兆网卡驱动。
#    - kmod-usb-storage/uas: USB存储和UAS加速驱动，用于挂载移动硬盘。
#    - 文件系统驱动: EXT4, NTFS, VFAT/exFAT，兼容主流硬盘和U盘格式。
#    - kmod-crypto-hw-rockchip: 硬件加密加速，提升VPN等加密性能。
# 6. 预装软件:
#    - LuCI: 完整Web界面，并包含简体中文语言包。
#    - Docker: 包含 `dockerd`, `containerd`, `runc`, 以及 luci-app-dockerman 方便管理。
#    - 文件共享: ksmbd (轻量Samba) 和对应luci-app-ksmbd。
#    - 实用工具: htop, irqbalance, ttyd, block-mount, automount等。
#
# ======================================================================================


#
# Target System (Rockchip)
#
# CONFIG_TARGET_apm821xx is not set
# CONFIG_TARGET_armsr is not set
# CONFIG_TARGET_ath79 is not set
# CONFIG_TARGET_bcm27xx is not set
# CONFIG_TARGET_bcm53xx is not set
CONFIG_TARGET_rockchip=y
CONFIG_TARGET_rockchip_armv8=y
CONFIG_TARGET_BOARD="rockchip"
CONFIG_TARGET_SUBTARGET="armv8"

#
# Target Profile (Generic Device)
# 推荐: 使用通用设备配置，以便项目构建脚本在打包时根据 `model_database.conf` 注入正确的DTB文件。
#
# CONFIG_TARGET_rockchip_armv8_DEVICE_friendlyarm_nanopi-r4s is not set
CONFIG_TARGET_rockchip_armv8_DEVICE_generic=y
CONFIG_TARGET_PROFILE="DEVICE_generic"
CONFIG_TARGET_ARCH_PACKAGES="aarch64_generic"


#
# Target Images
#
# 推荐: 使用EXT4文件系统格式，方便在Linux环境下进行二次编辑和扩容。
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_ROOTFS_TARGZ=y
# 推荐: Kernel分区128MB足够。
CONFIG_TARGET_KERNEL_PARTSIZE=128
# 推荐: RootFS分区4096MB(4GB)，为Docker和各类应用提供充足空间。
CONFIG_TARGET_ROOTFS_PARTSIZE=4096


#
# Global build settings
#
CONFIG_SIGNED_PACKAGES=y
CONFIG_KERNEL_BUILD_USER="Kerwin"
CONFIG_KERNEL_BUILD_DOMAIN="github.com/ispace-top"
CONFIG_EXTRA_OPTIMIZATION="-fno-caller-saves -fno-plt"
CONFIG_CCACHE=y


#
# Base system
# 基础系统组件，保持默认即可
#
CONFIG_PACKAGE_base-files=y
CONFIG_PACKAGE_auc=y
CONFIG_PACKAGE_busybox=y
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_dropbear=y
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_fstools=y
CONFIG_PACKAGE_kmod-gpio-button-hotplug=y
CONFIG_PACKAGE_kmod-nft-offload=y
CONFIG_PACKAGE_logd=y
CONFIG_PACKAGE_mtd=y
CONFIG_PACKAGE_netifd=y
CONFIG_PACKAGE_odhcp6c=y
CONFIG_PACKAGE_odhcpd-ipv6only=y
CONFIG_PACKAGE_procd=y
CONFIG_PACKAGE_procd-ujail=y
CONFIG_PACKAGE_ucode=y
CONFIG_PACKAGE_ucode-mod-fs=y
CONFIG_PACKAGE_ucode-mod-html=y
CONFIG_PACKAGE_ucode-mod-lua=y
CONFIG_PACKAGE_ucode-mod-math=y
CONFIG_PACKAGE_ucode-mod-ubus=y
CONFIG_PACKAGE_ucode-mod-uci=y
CONFIG_PACKAGE_ucode-mod-uloop=y
CONFIG_PACKAGE_urandom-seed=y
CONFIG_PACKAGE_urngd=y

#
# LuCI
#
# 推荐: 启用LuCI Web界面
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
# 推荐: 启用常用主题
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_luci-theme-material=y
# 推荐: 启用中文语言包
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y
# 推荐: 启用防火墙、OPKG包管理器、网络、系统等基础LuCI模块
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-mod-network=y
CONFIG_PACKAGE_luci-mod-system=y
CONFIG_PACKAGE_luci-mod-status=y
CONFIG_PACKAGE_luci-app-opkg=y
# 推荐: 终端
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-i18n-ttyd-zh-cn=y


#
# Kernel modules
#

#
# Filesystems
# 推荐: USB存储和硬盘所需的文件系统驱动
#
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-vfat=y
# 推荐: 挂载Windows分区所用的NTFS驱动
CONFIG_PACKAGE_kmod-fs-ntfs3=y
# 推荐: BTRFS文件系统，配合docker使用
CONFIG_PACKAGE_kmod-fs-btrfs=y


#
# Network Devices
# 推荐: RK3399 SoC集成的以太网控制器驱动
#
CONFIG_PACKAGE_kmod-dwmac-rockchip=y
CONFIG_PACKAGE_kmod-r8169=y # Realtek RTL8169/8168/8101/8125系列网卡驱动


#
# Network Support
# 推荐: 启用TCP BBR拥塞控制算法，改善网络吞吐量
#
CONFIG_PACKAGE_kmod-tcp-bbr=y
# IPv6支持
CONFIG_PACKAGE_kmod-ipv6=y
CONFIG_PACKAGE_kmod-ip6tables=y
CONFIG_PACKAGE_kmod-nf-nat6=y
# 组播/多播支持
CONFIG_PACKAGE_kmod-igmp-proxy=y
CONFIG_PACKAGE_kmod-udptunnel4=y
CONFIG_PACKAGE_kmod-udptunnel6=y


#
# USB Support
# 推荐: 完整的USB支持，包括USB2.0, 3.0, 存储(UAS)和串口设备。
#
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-dwc3=y
CONFIG_PACKAGE_kmod-usb-ehci=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y
CONFIG_PACKAGE_kmod-usb-uhci=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-serial=y
CONFIG_PACKAGE_kmod-usb-serial-ch341=y
CONFIG_PACKAGE_kmod-usb-serial-cp210x=y
CONFIG_PACKAGE_kmod-usb-serial-pl2303=y


#
# Cryptographic API modules
# 推荐: Rockchip硬件加密模块，提升VPN等性能
#
CONFIG_PACKAGE_kmod-crypto-hw-rockchip=y
CONFIG_PACKAGE_kmod-cryptodev=y


#
# Utilities
#

# 推荐: automount和block-mount用于自动挂载USB存储设备
CONFIG_PACKAGE_automount=y
CONFIG_PACKAGE_block-mount=y

# 推荐: htop用于进程查看
CONFIG_PACKAGE_htop=y

# 推荐: irqbalance用于多核CPU中断均衡，提升性能
CONFIG_PACKAGE_irqbalance=y

# 推荐: ttyd 提供网页版终端
CONFIG_PACKAGE_ttyd=y

# 推荐: curl, openssl-util, git等开发和调试工具
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_openssl-util=y
CONFIG_PACKAGE_git=y

#
# Docker / Containers
# 推荐: 4GB内存，非常适合运行Docker。
#
CONFIG_PACKAGE_containerd=y
CONFIG_PACKAGE_docker=y
CONFIG_PACKAGE_dockerd=y
CONFIG_PACKAGE_docker-compose=y
CONFIG_PACKAGE_runc=y
# 推荐: LuCI Docker管理界面
CONFIG_PACKAGE_luci-app-dockerman=y
CONFIG_PACKAGE_luci-lib-docker=y


#
# Network -> Filesystem
#
# 推荐: ksmbd是内核态的Samba服务器，性能高，资源占用小。
#
CONFIG_PACKAGE_ksmbd-server=y
CONFIG_PACKAGE_ksmbd-utils=y
# 推荐: ksmbd的LuCI管理界面
CONFIG_PACKAGE_luci-app-ksmbd=y
CONFIG_PACKAGE_luci-i18n-ksmbd-zh-cn=y


# 
# 其他常用软件包
#
# SSH文件传输服务
CONFIG_PACKAGE_openssh-sftp-server=y
# 磁盘和文件系统工具
CONFIG_PACKAGE_btrfs-progs=y
CONFIG_PACKAGE_fdisk=y
CONFIG_PACKAGE_lsblk=y
# 文件管理器
CONFIG_PACKAGE_filebrowser=y
# KMS服务器
CONFIG_PACKAGE_vlmcsd=y
# AdGuard Home去广告
CONFIG_PACKAGE_adguardhome=y
# IPv6和多播工具
CONFIG_PACKAGE_ipv6helper=y
CONFIG_PACKAGE_igmpproxy=y
CONFIG_PACKAGE_udpxy=y
#
# End of custom configuration
#

#
# User requested packages (additional)
#

#
# LuCI -> 3. Applications
#
CONFIG_PACKAGE_luci-app-ddns=y
CONFIG_PACKAGE_luci-i18n-ddns-zh-cn=y
CONFIG_PACKAGE_luci-app-openvpn=y
CONFIG_PACKAGE_luci-i18n-openvpn-zh-cn=y
CONFIG_PACKAGE_luci-app-ocserv=y
CONFIG_PACKAGE_luci-i18n-ocserv-zh-cn=y
CONFIG_PACKAGE_luci-app-wireguard=y
CONFIG_PACKAGE_luci-i18n-wireguard-zh-cn=y
CONFIG_PACKAGE_luci-app-ipsec-vpnd=y
CONFIG_PACKAGE_luci-i18n-ipsec-vpnd-zh-cn=y
CONFIG_PACKAGE_luci-app-turboacc=y
CONFIG_PACKAGE_luci-i18n-turboacc-zh-cn=y
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-i18n-passwall-zh-cn=y
CONFIG_PACKAGE_luci-app-argon-config=y
CONFIG_PACKAGE_luci-i18n-argon-config-zh-cn=y
CONFIG_PACKAGE_luci-app-filebrowser=y
CONFIG_PACKAGE_luci-i18n-filebrowser-zh-cn=y
CONFIG_PACKAGE_luci-app-serverchan=y
CONFIG_PACKAGE_luci-i18n-serverchan-zh-cn=y
CONFIG_PACKAGE_luci-app-accesscontrol=y
CONFIG_PACKAGE_luci-i18n-accesscontrol-zh-cn=y
CONFIG_PACKAGE_luci-app-vlmcsd=y
CONFIG_PACKAGE_luci-i18n-vlmcsd-zh-cn=y
CONFIG_PACKAGE_luci-app-nft-qos=y
CONFIG_PACKAGE_luci-i18n-nft-qos-zh-cn=y
CONFIG_PACKAGE_luci-app-adguardhome=y
CONFIG_PACKAGE_luci-i18n-adguardhome-zh-cn=y
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-i18n-openclash-zh-cn=y

#
# LuCI -> 4. Themes
#
CONFIG_PACKAGE_luci-theme-argon=y

#
# Kernel modules
#
CONFIG_PACKAGE_kmod-wireguard=y

#
# Network -> VPN
#
CONFIG_PACKAGE_openvpn-openssl=y
CONFIG_PACKAGE_wireguard-tools=y
CONFIG_PACKAGE_strongswan-full=y
CONFIG_PACKAGE_ocserv=y

#
# Network -> IP Addresses and Names
#
CONFIG_PACKAGE_ddns-scripts=y
CONFIG_PACKAGE_ddns-scripts-cloudflare=y
CONFIG_PACKAGE_ddns-scripts-aliyun=y
CONFIG_PACKAGE_ddns-scripts-dnspod=y

#
# Network -> Proxies
# Passwall dependencies
#
CONFIG_PACKAGE_xray-core=y
CONFIG_PACKAGE_v2ray-core=y
CONFIG_PACKAGE_chinadns-ng=y
CONFIG_PACKAGE_ipt2socks=y
CONFIG_PACKAGE_shadowsocks-libev-ss-redir=y
CONFIG_PACKAGE_simple-obfs=y
CONFIG_PACKAGE_v2ray-plugin=y
CONFIG_PACKAGE_xray-plugin=y
CONFIG_PACKAGE_hysteria=y
CONFIG_PACKAGE_naiveproxy=y

#
# End of user requested packages
#

#
# System Info Display Enhancements
#
# For CPU Temperature display
CONFIG_PACKAGE_kmod-hwmon-rockchip-thermal=y
# For CPU Frequency display
CONFIG_PACKAGE_cpufreq-info=y
CONFIG_PACKAGE_luci-app-cpufreq=y
CONFIG_PACKAGE_luci-i18n-cpufreq-zh-cn=y

#
# Statistics and Monitoring
#
CONFIG_PACKAGE_luci-app-statistics=y
CONFIG_PACKAGE_collectd=y
CONFIG_PACKAGE_rrdtool1=y
# Essential collectd plugins
CONFIG_PACKAGE_collectd-mod-cpu=y
CONFIG_PACKAGE_collectd-mod-interface=y
CONFIG_PACKAGE_collectd-mod-load=y
CONFIG_PACKAGE_collectd-mod-memory=y
CONFIG_PACKAGE_collectd-mod-network=y
# For CPU Temperature graphing
CONFIG_PACKAGE_collectd-mod-thermal=y

#
# Comprehensive Kernel Modules for Future Compatibility
#

# User-requested kmods
CONFIG_PACKAGE_kmod-crypto-deflate=y
CONFIG_PACKAGE_kmod-crypto-echainiv=y
CONFIG_PACKAGE_kmod-ipsec=y
CONFIG_PACKAGE_kmod-ipsec6=y
CONFIG_PACKAGE_kmod-ipt-ipsec=y
CONFIG_PACKAGE_kmod-iptunnel6=y

# Netfilter (Firewall) Extensions
CONFIG_PACKAGE_kmod-ipt-conntrack-extra=y
CONFIG_PACKAGE_kmod-ipt-hashlimit=y
CONFIG_PACKAGE_kmod-ipt-ipopt=y
CONFIG_PACKAGE_kmod-ipt-nat-extra=y
CONFIG_PACKAGE_kmod-ipt-u32=y
CONFIG_PACKAGE_kmod-ipt-fullconenat=y

# Advanced Networking
CONFIG_PACKAGE_kmod-bonding=y
CONFIG_PACKAGE_kmod-veth=y
CONFIG_PACKAGE_kmod-vxlan=y
CONFIG_PACKAGE_kmod-gre=y
CONFIG_PACKAGE_kmod-sched-cake=y
CONFIG_PACKAGE_kmod-sched-fq-codel=y

# Additional Filesystems
CONFIG_PACKAGE_kmod-fs-hfsplus=y
CONFIG_PACKAGE_kmod-fs-xfs=y

# Other Useful Kernel Modules
CONFIG_PACKAGE_kmod-ikconfig=y
CONFIG_PACKAGE_kmod-loop=y